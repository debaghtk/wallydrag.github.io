<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="a small intro to ansible"><meta itemprop=name content="Ansible"><meta itemprop=description content="a small intro to ansible"><meta itemprop=datePublished content="2015-11-11T01:53:33+05:30"><meta itemprop=dateModified content="2015-11-11T01:53:33+05:30"><meta itemprop=wordCount content="531"><meta itemprop=keywords content="orchestration,ansible,devops,configuration management,"><meta property="og:title" content="Ansible"><meta property="og:description" content="a small intro to ansible"><meta property="og:type" content="article"><meta property="og:url" content="https://deba.dev/posts/ansible/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-11-11T01:53:33+05:30"><meta property="article:modified_time" content="2015-11-11T01:53:33+05:30"><meta name=twitter:card content="summary"><meta name=twitter:title content="Ansible"><meta name=twitter:description content="a small intro to ansible"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><title>Ansible</title><link rel=stylesheet href=https://deba.dev/css/style.min.00424e93ede3af47d2ef9f3319a4ccb101f6ad932c37714e8b4e1b42808bde2c.css integrity="sha256-AEJOk+3jr0fS758zGaTMsQH2rZMsN3FOi04bQoCL3iw=" crossorigin=anonymous></head><body id=page><header id=site-header><div class="hdr-wrapper section-inner"><div class=hdr-left></div><div class="hdr-right hdr-icons"><div class=site-nav><a href=https://deba.dev>Home</a></div><nav class="site-nav hide-in-mobile"><a href=https://deba.dev/posts/>Posts</a>
<a href=https://deba.dev/books/>Books</a>
<a href=https://deba.dev/about/>About</a></nav><span class="hdr-social hide-in-mobile"><a href=https://twitter.com/deba_ghtk target=_blank rel="noopener me" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a href=https://github.com/wallydrag target=_blank rel="noopener me" title=Github><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=https://www.linkedin.com/in/debashish-ghatak target=_blank rel="noopener me" title=Linkedin><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></span><button id=menu-btn class=hdr-btn title=Menu><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div></div></header><div id=mobile-menu class="animated fast"><ul><li><a href=https://deba.dev/posts/>Posts</a></li><li><a href=https://deba.dev/books/>Books</a></li><li><a href=https://deba.dev/about/>About</a></li></ul></div><main class="site-main section-inner animated fadeIn faster"><article class=thin><header class=post-header><div class=post-meta><span>Nov 11, 2015</span></div><h1 style="font-family:trebuchet ms">Ansible</h1><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script></header><div class=content><p>Imagine a situation where you have two machines, where one is your
workstation. Let&rsquo;s call it the management node. The other one is a fresh
ubuntu/centos machine which can be bare metal physical box or a cloud
instance. Let&rsquo;s say you have to configure this machine into a apache or
nginx web server.</p><p>One way to go about this would be to manually ssh into the machine,
install the necessary packages and editing the configuration files.</p><p>This is a pretty common practice, but this manual work can quickly pile
up if you have say tens or even hundreds of machines. Not only will this
take up a lot of your precious time and energy, but the chances of
making an error are there as well, as we are doing everything manually.
Also there are always these scenarios when something important dies and
you are not sure about how to recreate it quickly. And you again engage
into such manual work which created this mess in the first place.</p><h4 id=there-should-be-a-better-way-right>There should be a better way, right.<a href=#there-should-be-a-better-way-right class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>This is where configuration management tools come in to automate such
tasks, saving you time and improving the overall process.</p><p>Ansible is one such easy to use open source configuration management and
orchestration tool, and is directly targeted at solving such problems.</p><p>Let&rsquo;s just get started. Let&rsquo;s go back to our problem. We had many
instances and everyone needed to configured in a different way.</p><p>So what we need is Ansible installed on your machine/workstation. This
is generally called the Ansible management node. Also you need an inventory
file and playbook(s).</p><h4 id=what-do-these-terms-inventory-file-and-playbooks-mean>What do these terms, inventory file and playbooks mean?<a href=#what-do-these-terms-inventory-file-and-playbooks-mean class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>An inventory file is basically just a listing of host names or ip
addresses of instances you want to configure. You can either use fqdn or
just host names or even ip addresses, neat right. You can also group a
number of instances under a heading, if those nodes are to configured
the same way.</p><pre><code>[load-balancer]
haproxy-01.exam ple.com
haproxy-02
10.2.10.15

[web-app]
web-app-01.example.com
web-app-02
</code></pre><p>Above is a sample host inventory file. Notice how can we group these
instances together. So now while running a script, I can just mention
the group <code>load-balancer</code> and it will run on all the three instances
mentioned.</p><p>Playbooks are configuration files, that outline tasks that are to be run
against a host, that otherwise we would have performed manually. Playbooks
are in written in yaml which makes it very easy to write and it also
increases the readablity as its almost plain English. Below is an
example playbook file.</p><pre><code>---
- hosts: web-app
  sudo: yes

  tasks:

  - name: install nginx
    apt: name=nginx state=installed update_cache=yes

  - name: load config file
    template: src=templates/nginx.conf.j2 dest=/etc/nginx/nginx.conf

  handlers:

  - name: restart nginx
    service: name=nginx state=restarted
</code></pre><p>One can see the playbook is self-explanatory in itself, which is really
great if we have multiple people on the same team.</p><p>Now, when we run ansible-playbook shell command, along with other
parameters, ansible will look into the hosts file for the machines,
ssh-trusts into them and performs the tasks listed in the playbook.</p><p>And that&rsquo;s it. It&rsquo;s really as easy as that.</p><p>Below are some links for further reading.</p><ul><li><a href=http://docs.ansible.com/>Ansible Docs</a></li></ul></div><hr class=post-end><footer class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://deba.dev/tags/orchestration>orchestration</a></span><span class=tag><a href=https://deba.dev/tags/ansible>ansible</a></span><span class=tag><a href=https://deba.dev/tags/devops>devops</a></span><span class=tag><a href=https://deba.dev/tags/configuration-management>configuration management</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>531 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2015-11-10 20:23 +0000</p></footer></article><div class="post-nav thin"><a class=next-post href=https://deba.dev/posts/continous-delivery-continous-deployment-and-continous-integration-whats-the-difference/><span class=post-nav-label><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>&nbsp;Newer</span><br><span>Continuous Delivery Continuous Deployment and Continuous Integration Whats the Difference</span></a>
<a class=prev-post href=https://deba.dev/posts/solid/><span class=post-nav-label>Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></span><br><span>SOLID</span></a></div><div id=comments class=thin></div></main><footer id=site-footer class="section-inner thin animated fadeIn faster"><p>&copy; 2021 <a href=https://deba.dev>Debashish Ghatak</a> &#183; <a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank rel=noopener>CC BY-NC 4.0</a></p><p>Made with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> &#183; Theme <a href=https://github.com/Track3/hermit target=_blank rel=noopener>Hermit</a> &#183; <a href=https://deba.dev/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></p></footer><script src=https://deba.dev/js/bundle.min.7d8545daa55d62427355498dd8da13f98ff79a7938ce7d2a5e2ae1ec0de3beb8.js integrity="sha256-fYVF2qVdYkJzVUmN2NoT+Y/3mnk4zn0qXirh7A3jvrg=" crossorigin=anonymous></script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-180150258-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>